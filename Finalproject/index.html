<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.1.0-10/css/all.css">
    <title>Tej key</title>
</head>

<body>
    <div class="heading">
        <h1><i class="far fa-sticky-notes">Tej keep</i></h1>
    </div>
    <div class="btn-div">
        <button class="learn-more" class="add" id="add">
            <span class="Circle" aria-hidden="true">
                <span class="icon-arrow"></span>
            </span>
            <span class="button-text">Add Note</span>
        </button>
    </div>
    <script>
        const addButton = document.querySelector('#add');
        const updateLSdata = () => {
            const textareadata = document.querySelectorAll('textarea');
            const notes = [];
            console.log(textareadata);
            textareadata.forEach((note) => {
                return notes.push(note.value);
            })
            console.log(notes);
        }
        const addNewNote = (text = '') => {
            const note = document.createElement('div');
            note.classList.add('note');
            const htmlData = `
            <div class="abc">
              <div class="operation">
          <button class="edit"><i class="fas fa-edit"></i></button>
          <button class="delete"><i class="fas fa-trash-alt"></i></button>
        </div>
        <div class="main ${text ? "" : "hidden"} "></div>
        <textarea class="${text ? "hidden" : ""} "></textarea>
        </div>
        `;
            note.insertAdjacentHTML('afterbegin', htmlData);
            const editbutton = note.querySelector('.edit');
            const delbutton = note.querySelector('.delete');
            const maindiv = note.querySelector('.main');
            const textarea = note.querySelector('textarea');

            delbutton.addEventListener('click', () => {
                note.remove();
            })
            textarea.value = text;
            maindiv.innnerHTML = text;
            editbutton.addEventListener('click', () => {
                maindiv.classList.toggle('hidden');
                textarea.classList.toggle('hidden');
            })

            textarea.addEventListener('change', (event) => {
                const value = event.target.value;
                maindiv.innerHTML = value;
                updateLSdata();
            })

            document.body.appendChild(note);
        }
        addButton.addEventListener('click', () => addNewNote());
    </script>

</body>

</html>